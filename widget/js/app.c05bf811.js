(function(e){function t(t){for(var o,i,l=t[0],c=t[1],u=t[2],s=0,p=[];s<l.length;s++)i=l[s],r[i]&&p.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(o=!1)}o&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},r={app:0},a=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("04f5"),r=n.n(o);r.a},"04f5":function(e,t,n){},"0ba2":function(e,t,n){"use strict";var o=n("6c41"),r=n.n(o);r.a},"48cd":function(e,t,n){},"4fdf":function(e,t,n){"use strict";var o=n("dcc8"),r=n.n(o);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var o=n("2b0e"),r=n("76a0"),a=n.n(r),i=n("8c4f"),l=(n("aa35"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)}),c=[],u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-container",attrs:{id:"mapBoxMap"}})},d=[],s=(n("28a5"),n("7f7f"),n("e192")),p=n.n(s),f="prod",m="http://localhost:8080",y="/api",g="http://fs-road.navinfo.com/dev/trunk/funWander/service",h="dev"===f?y:g,v={localhost:m,service:{serviceUrl:h},minedata:{serviceUrl:"http://139.199.20.29/data",accessToken:"67f6bfed606941f9a63d26d0ad61de2f",solution:4784}},b=v,k=function(e){return"".concat(b.minedata.serviceUrl).concat(e,"/{z}/{x}/{y}?token=").concat(b.minedata.accessToken,"&solu=").concat(b.minedata.solution)},x=(k("/Landuse"),k("/Ptline"),k("/Buildingmore"),k("/Railway"),k("/Waterface"),k("/Villtown"),k("/Road"),k("/Worldannotation"),k("/Poi"),k("/Greenface"),k("/Subwaypolygon"),k("/Annotation"),k("/Adminbound"),k("/Waterline"),k("/Worldcountries"),k("/Ptexit"),k("/ResidentialPolygon"),k("/Worldwaterface"),k("/Ptstop"),k("/Adminflag"),k("/Zlevel"),"".concat(b.localhost,"/res/mapbox/sprite/sprite"),"".concat(b.localhost,"/res/mapbox/glyphs/{fontstack}/{range}"),{version:8,sprite:"".concat(b.localhost,"/res/mapbox/sprite/sprite"),glyphs:"".concat(b.localhost,"/res/mapbox/glyphs/{fontstack}/{range}.pbf"),sources:{"raster-tiles":{type:"raster",tiles:["http://rt0.map.gtimg.com/realtimerender?z={z}&x={x}&y={y}&type=vector&style=0","http://rt1.map.gtimg.com/realtimerender?z={z}&x={x}&y={y}&type=vector&style=0","http://rt2.map.gtimg.com/realtimerender?z={z}&x={x}&y={y}&type=vector&style=0","http://rt3.map.gtimg.com/realtimerender?z={z}&x={x}&y={y}&type=vector&style=0"],scheme:"tms",tileSize:256,minZoom:5,maxZoom:18}},layers:[{id:"simple-tiles",type:"raster",source:"raster-tiles"}]}),_=x,w=n("bc3a"),M=n.n(w),j=M.a.create({baseURL:b.service.serviceUrl}),T=function(e){return j.get(e).then(function(e){return e.data})},O=function(e,t){return j.post(e,t).then(function(e){return e.data})},S={get:T,post:O},z=n("324a"),F=n.n(z),P=function(e){return F.a.parse(e)},L=function(e){return F.a.stringify(e)},Z={wktToGeojson:P,geoJsonToWkt:L};p.a.accessToken="pk.eyJ1IjoibWFkc2hhd24iLCJhIjoiY2lqY2ZwcW4zMDAwMXc2a3VybmsxdzU1OSJ9.UTV2YhX9rABrPQIEI2QKwg";var B={name:"MainMap",props:{},mounted:function(){this.createMap()},methods:{createMap:function(){var e=this,t=new p.a.Map({container:"mapBoxMap",style:_,minZoon:3,maxZoom:24,zoom:17,center:[108.94400235446722,34.300590391379714]});t.on("load",function(){t.addSource("building",{type:"geojson",data:null}),t.addSource("poi-face",{type:"geojson",data:null}),t.addSource("link",{type:"geojson",data:null}),t.addSource("poi",{type:"geojson",data:null}),t.addLayer({id:"building-layer",type:"fill",source:"building",layout:{},paint:{"fill-color":"#666","fill-opacity":.2}}),t.addLayer({id:"poi-face-layer",type:"fill",source:"poi-face",layout:{},paint:{"fill-outline-color":"#999","fill-color":"#999","fill-opacity":.2}}),t.addLayer({id:"link-layer",type:"line",source:"link",layout:{},paint:{"line-opacity":.8,"line-color":"#aaa","line-width":2}}),t.addLayer({id:"poi-layer",type:"circle",source:"poi",layout:{},paint:{"circle-radius":2,"circle-color":"#000"}}),t.addLayer({id:"poi-symbol-layer",type:"symbol",source:"poi",layout:{"text-field":"{name}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12,"text-offset":[0,0],"text-anchor":"top"},paint:{}}),e.loadBuilding(6101000094).then(function(e){e&&(t.getSource("building").setData(e),t.flyTo({center:e.properties.center}))}),e.loadPoiFace(61010000941001).then(function(e){e&&t.getSource("poi-face").setData({type:"FeatureCollection",features:e})}),e.loadLink(61010000941001).then(function(e){e&&t.getSource("link").setData({type:"FeatureCollection",features:e})}),e.loadPoi(61010000941001).then(function(e){e&&t.getSource("poi").setData({type:"FeatureCollection",features:e})})}),t.on("zoomend",function(e){console.log(t.getZoom())})},loadBuilding:function(e){return S.get("/indoor/building/".concat(e)).then(function(e){if(e&&e.data&&e.data.length>0){var t=e.data[0];return{type:"Feature",properties:{id:t.id,kind:t.kind,name:t.name,center:t.center_coordinate.split(",").map(function(e){return parseFloat(e)})},geometry:Z.wktToGeojson(t.geometry)}}return null}).catch(function(e){return console.error(e),null})},loadPoiFace:function(e){return S.get("/indoor/building/floor/poiFace/".concat(e)).then(function(e){return e&&e.data&&e.data.length>0?e.data.map(function(e){return{type:"Feature",properties:{id:e.face_id,kind:e.kind},geometry:Z.wktToGeojson(e.geometry)}}):null}).catch(function(e){return console.error(e),null})},loadLink:function(e){return S.get("/indoor/building/floor/link/".concat(e)).then(function(e){return e&&e.data&&e.data.length>0?e.data.map(function(e){return{type:"Feature",properties:{id:e.link_id,kind:e.kind,type:e.type,snodeId:e.snode_id,enodeId:e.enode_id},geometry:Z.wktToGeojson(e.geometry)}}):null}).catch(function(e){return console.error(e),null})},loadPoi:function(e){return S.get("/indoor/building/floor/poi/".concat(e)).then(function(e){return e&&e.data&&e.data.length>0?e.data.map(function(e){var t=Z.wktToGeojson(e.geometry);return{type:"Feature",properties:{id:e.id,kind:e.kind,name:e.name,faceId:e.face_id},geometry:t}}):null}).catch(function(e){return console.error(e),null})}}},C=B,I=(n("4fdf"),n("2877")),J=Object(I["a"])(C,u,d,!1,null,"356b559c",null);J.options.__file="MapBoxMap.vue";var U=J.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-container",attrs:{id:"leafletMap"}})},W=[],A=n("e11e"),E=n.n(A),N=(n("6cc5"),{name:"LeafletMap",props:{},mounted:function(){this.createMap()},methods:{createMap:function(){var e=E.a.map("leafletMap",{minZoom:5,maxZoom:24,zoomControl:!1,attributionControl:!1}).setView([34.300590391379714,108.94400235446722],17);E.a.tileLayer("http://{s}.map.gtimg.com/realtimerender?z={z}&x={x}&y={y}&type=vector&style=0",{minZoom:5,maxZoom:18,id:"mapbox.streets",subdomains:["rt0","rt1","rt2","rt3"],tms:!0}).addTo(e),this.loadBuilding(6101000094).then(function(t){t&&(E.a.geoJSON(t,{style:{color:"#999",fill:!0,fillColor:"#666",fillOpacity:.2}}).addTo(e),e.setView(t.properties.center,20))}),this.loadPoiFace(61010000941001).then(function(t){t&&E.a.geoJSON(t,{style:{color:"#999",fill:!0,fillColor:"#999",fillOpacity:.2}}).addTo(e)}),this.loadLink(61010000941001).then(function(t){t&&E.a.geoJSON(t,{style:{color:"#ddd"}}).addTo(e)}),this.loadPoi(61010000941001).then(function(t){t&&(E.a.geoJSON(t,{style:{radius:2,color:"#999",fill:!0,fillColor:"#999",fillOpacity:.2},pointToLayer:function(e,t){return E.a.circleMarker(t)}}).addTo(e),E.a.geoJSON(t,{pointToLayer:function(e,t){var n=E.a.divIcon({html:e.properties.name,className:"div-icon",iconSize:[50,20],iconAnchor:[25,-5]});return E.a.marker(t,{icon:n})}}).addTo(e))})},loadBuilding:function(e){return S.get("/indoor/building/".concat(e)).then(function(e){if(e&&e.data&&e.data.length>0){var t=e.data[0];return{type:"Feature",properties:{id:t.id,kind:t.kind,name:t.name,center:t.center_coordinate.split(",").map(function(e){return parseFloat(e)}).reverse()},geometry:Z.wktToGeojson(t.geometry)}}return null}).catch(function(e){return console.error(e),null})},loadPoiFace:function(e){return S.get("/indoor/building/floor/poiFace/".concat(e)).then(function(e){return e&&e.data&&e.data.length>0?e.data.map(function(e){return{type:"Feature",properties:{id:e.face_id,kind:e.kind},geometry:Z.wktToGeojson(e.geometry)}}):null}).catch(function(e){return console.error(e),null})},loadLink:function(e){return S.get("/indoor/building/floor/link/".concat(e)).then(function(e){return e&&e.data&&e.data.length>0?e.data.map(function(e){return{type:"Feature",properties:{id:e.link_id,kind:e.kind,type:e.type,snodeId:e.snode_id,enodeId:e.enode_id},geometry:Z.wktToGeojson(e.geometry)}}):null}).catch(function(e){return console.error(e),null})},loadPoi:function(e){return S.get("/indoor/building/floor/poi/".concat(e)).then(function(e){return e&&e.data&&e.data.length>0?e.data.map(function(e){var t=Z.wktToGeojson(e.geometry);return{type:"Feature",properties:{id:e.id,kind:e.kind,name:e.name,faceId:e.face_id},geometry:t}}):null}).catch(function(e){return console.error(e),null})}}}),R=N,$=(n("8334"),Object(I["a"])(R,G,W,!1,null,"746f5247",null));$.options.__file="LeafletMap.vue";var D=$.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-container",attrs:{id:"mineMap"}})},Y=[];minemap.domainUrl="http://139.199.20.29",minemap.serviceUrl="http://139.199.20.29/service",minemap.spriteUrl="http://139.199.20.29/app/images/map/sprite",minemap.accessToken="6cbcf83014ca4d2abbe758e02c9e3dbe";var Q={name:"MineMap",props:{},mounted:function(){this.createMap()},methods:{createMap:function(){minemap.solution=4791;new minemap.Map({container:"mineMap",style:"http://139.199.20.29/service/solu/style/id/4791",minZoon:3,maxZoom:24,zoom:16,center:[108.94400235446722,34.300590391379714]})}}},X=Q,q=(n("ad63"),Object(I["a"])(X,V,Y,!1,null,"1482816d",null));q.options.__file="MineMap.vue";var H=q.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.buildings,function(e){return n("mt-cell",{attrs:{title:e.name,value:e.name,to:"/map","is-link":""}})}))},ee=[],te={name:"HelloWorld",data:function(){return{buildings:[]}},props:{},mounted:function(){var e=this;this.loadBuilding().then(function(t){t&&(e.buildings=t)})},methods:{loadBuilding:function(e){return S.get("/indoor/building").then(function(e){return e&&e.data?e.data.map(function(e){return{id:e.id,name:e.name}}):null}).catch(function(e){return console.error(e),null})}}},ne=te,oe=(n("0ba2"),Object(I["a"])(ne,K,ee,!1,null,"1daec8ba",null));oe.options.__file="BuildingList.vue";var re=oe.exports,ae=[{path:"/",component:re},{path:"/map",component:D},{path:"/mapbox",component:U},{path:"/minmap",component:H}],ie=new i["a"]({routes:ae}),le={name:"app",router:ie},ce=le,ue=(n("034f"),Object(I["a"])(ce,l,c,!1,null,null,null));ue.options.__file="App.vue";var de=ue.exports;o["default"].config.productionTip=!1,o["default"].use(a.a),o["default"].use(i["a"]),new o["default"]({render:function(e){return e(de)}}).$mount("#app")},"6c41":function(e,t,n){},8334:function(e,t,n){"use strict";var o=n("fcba"),r=n.n(o);r.a},ad63:function(e,t,n){"use strict";var o=n("48cd"),r=n.n(o);r.a},dcc8:function(e,t,n){},fcba:function(e,t,n){}});
//# sourceMappingURL=app.c05bf811.js.map